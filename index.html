<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shader Practice</title>
    <style>
        body{
            margin: 0;
        }

        canvas{
            display: block;
            background-color: blue;
        }
    </style>
</head>
<body>


    <canvas id="myCanvas"></canvas>

<script id="vertShader" type="x-shader/x-vert">
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 pos;

void main(void){
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    pos = aTextureCoord;
}
</script>

<script id="fragShader" type="x-shader/x-frag">
varying vec2 pos;
uniform sampler2D uSampler;
uniform sampler2D perlin;
uniform float delta;

void main(void){
    vec4 color = texture2D(uSampler, pos);
    vec2 input1 = vec2(fract(pos.x * 4.0 + delta), fract(pos.y * 4.0 + delta/2.0));
    vec4 perlinNoise1 = texture2D(perlin, input1);
    vec2 input2 = vec2(fract(pos.x - delta/4.0), fract(pos.y - delta/2.0));
    vec4 perlinNoise2 = texture2D(perlin, input2);
    color = (perlinNoise1 + perlinNoise2) / 2.0;
    color = vec4(step(color, vec4(0.4)));
    gl_FragColor = color;
}
</script>

    <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.x/dist/pixi.min.js"></script>
    <script src="/shader.js"></script>
</body>
</html>